{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AuthHeadersLink = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar R = _interopRequireWildcard(require(\"ramda\"));\n\nvar _apolloLink = require(\"apollo-link\");\n\nvar assocWhenNotEmpty = function assocWhenNotEmpty(key, value) {\n  return R.when(R.always(R.complement(R.either(R.isNil, R.isEmpty))(value)), R.assoc(key, value));\n};\n\nvar AuthHeadersLink =\n/*#__PURE__*/\nfunction (_ApolloLink) {\n  (0, _inherits2.default)(AuthHeadersLink, _ApolloLink);\n\n  function AuthHeadersLink(_ref) {\n    var _this;\n\n    var getAuthState = _ref.getAuthState;\n    (0, _classCallCheck2.default)(this, AuthHeadersLink);\n    _this = (0, _possibleConstructorReturn2.default)(this, (0, _getPrototypeOf2.default)(AuthHeadersLink).call(this));\n    _this.getAuthState = getAuthState;\n    return _this;\n  }\n\n  (0, _createClass2.default)(AuthHeadersLink, [{\n    key: \"request\",\n    value: function request(operation, forward) {\n      var _this$getAuthState = this.getAuthState(),\n          token = _this$getAuthState.token,\n          workspaceId = _this$getAuthState.workspaceId;\n\n      operation.setContext(R.over(R.lensProp('headers'), R.pipe(assocWhenNotEmpty('authorization', token ? \"Bearer \".concat(token) : null), assocWhenNotEmpty('workspace', workspaceId))));\n      return forward(operation);\n    }\n  }]);\n  return AuthHeadersLink;\n}(_apolloLink.ApolloLink);\n\nexports.AuthHeadersLink = AuthHeadersLink;","map":null,"metadata":{},"sourceType":"script"}